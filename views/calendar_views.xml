<?xml version="1.0"?>
  <odoo>
    <record id="calendar_event_view_form_gantt_booking_inherit" model="ir.ui.view">
        <field name="name">calendar.event.view.form.gantt.booking.inherit</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="appointment.calendar_event_view_form_gantt_booking"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='appointment_type_id']" position="replace">
                <field name="appointment_type_id" options="{'no_create': True}" widget="hbn_appointment_type_sync_duration"/>
            </xpath>
        </field>
    </record>
    <record id="calendar_event_view_form_booking" model="ir.ui.view">
        <field name="name">calendar.event.view.form.booking</field>
        <field name="model">calendar.event</field>
        <field name="arch" type="xml">
            <form string="Bookings">
                <sheet>
                    <div class="alert alert-warning d-flex flex-wrap" role="alert" invisible="not on_leave_partner_ids">
                        <span class="me-1">Attendees marked as busy at the selected time</span><field name="on_leave_partner_ids" widget="many2many_tags"/>
                    </div>
                    <div class="alert alert-warning d-flex flex-wrap" role="alert" invisible="not on_leave_resource_ids">
                        <field name="appointment_resource_ids" invisible="1"/>
                        <span class="me-1">You are scheduling a booking outside the available hours of</span>
                        <field name="on_leave_resource_ids" widget="many2many_tags" readonly="1"/>
                    </div>
                    <div class="oe_title mb-3">
                        <label for="name" string="Booking Name"/>
                        <h1>
                            <field name="name" placeholder='e.g. "John Doe - Tennis Court Booking"' required="True"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="appointment_status" string="Status" invisible="not appointment_type_id" required="appointment_type_id"/>
                            <field name="appointment_type_id" options="{'no_create': True}" widget="hbn_appointment_type_sync_duration"/>
                            <label for="start" string="Date"/>
                            <div class="o_row">
                                <field name="start"/>
                                <i class="fa fa-long-arrow-right mx-2" aria-label="Until Icon" title="Arrow"/>
                                <field name="stop"/>
                            </div>
                            <field name="user_id" widget="many2one_avatar_user" options="{'no_create': True}"/>
                            <div invisible="not resource_ids or not appointment_type_manage_capacity or appointment_type_schedule_based_on != 'resources'" colspan="2">
                                <label for="resource_total_capacity_reserved" class="me-5"/>
                                <field name="resource_total_capacity_reserved" string="Total Reserved" class="oe_inline"/>
                                <span>people</span>
                            </div>
                        </group>
                        <group>
                            <field name="partner_ids" widget="many2many_tags_avatar"
                                   placeholder="Select attendees..."
                                   options="{'no_quick_create': True}"
                                   context="{'form_view_ref': 'base.view_partner_simple_form'}"
                                   class="oe_inline o_required_modifier o_field_highlight"  colspan="2"/>
                            <label for="duration"/>
                            <div>
                                <field name="duration" widget="float_time" string="Duration" class="oe_inline"/>
                                <span> hours</span>
                            </div>
                            <field name="appointment_type_manage_capacity" invisible="1"/>
                            <field name="appointment_type_schedule_based_on" invisible="1"/>
                            <field name="appointment_resource_ids" invisible="1"/>
                            <field name="resource_ids" string="Resources" options="{'no_create': True}"
                                   invisible="not appointment_type_id or appointment_type_schedule_based_on != 'resources'"
                                   domain="[('appointment_type_ids', 'in', appointment_type_id)]" widget="many2many_tags"/>
                        </group>
                        <field name="description" placeholder="Extra Comments..."/>
                    </group>
                </sheet>
                <footer>
                    <button string="Save" special="save" data-hotkey="s" class="btn btn-primary" close="1"/>
                    <button string="Discard" special="cancel" data-hotkey="j" class="btn-secondary" close="1"/>
                    <button string="Remove" name="unlink" type="object" data-hotkey="x" invisible="not id"
                            class="btn btn-secondary o_form_button_remove" close="1" confirm-title="Delete Booking" confirm-label="Delete Booking"
                            confirm="Are you sure you want to delete this Booking? Once it's gone, it's gone for good!"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="view_calendar_event_calendar_inherit" model="ir.ui.view">
        <field name="name">calendar.event.calendar.inherit</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_calendar"/>
        <field name="arch" type="xml">
          <xpath expr="//calendar" position="attributes">
             <attribute name="js_class">appointment_booking_form</attribute>
             <attribute name="form_view_id">%(calendar_event_view_form_booking)d</attribute>
          </xpath>
        </field>
    </record>
    <record id="calendar_event_view_gantt_booking_resource_inherit" model="ir.ui.view">
        <field name="name">calendar.event.view.gantt.booking.resource.inherit</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="appointment.calendar_event_view_gantt_booking_resource"/>
        <field name="arch" type="xml">
          <xpath expr="//gantt" position="attributes">
            <attribute name="slot_min_time">11:00</attribute>
            <attribute name="slot_max_time">22:00</attribute>
          </xpath>
        </field>
    </record>
  </odoo>
